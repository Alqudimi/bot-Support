# دليل المستخدم - نظام تحليل المشاعر

## مقدمة

مرحباً بك في نظام تحليل المشاعر! هذا الدليل سيساعدك على فهم واستخدام جميع ميزات النظام بفعالية.

## نظرة عامة على النظام

نظام تحليل المشاعر هو أداة قوية لتحليل وتتبع المشاعر في النصوص. يمكنك استخدامه لـ:
- إدارة المستخدمين وبياناتهم
- تحليل المشاعر في الرسائل النصية
- تتبع تطور المشاعر عبر الوقت
- إنتاج تقارير وإحصائيات مفصلة

---

## البدء السريع

### 1. تشغيل النظام
```bash
python app.py
```

### 2. فتح واجهة الاختبار
افتح ملف `test_api.html` في متصفح الويب

### 3. إضافة أول مستخدم
1. املأ نموذج "إنشاء مستخدم جديد"
2. انقر على "إنشاء مستخدم"
3. ستحصل على معرف المستخدم

### 4. إضافة أول رسالة
1. انقر على "إضافة رسالة مثال"
2. أو املأ النموذج يدوياً
3. ستتم معالجة الرسالة وتحليل مشاعرها

---

## واجهة الاختبار

### أقسام الواجهة

#### 1. إدارة المستخدمين
- **إنشاء مستخدم جديد**: إضافة مستخدم بالاسم والجنس والعمر
- **البحث عن مستخدم**: العثور على مستخدم بمعرفه
- **عرض جميع المستخدمين**: قائمة بجميع المستخدمين
- **البحث بالاسم**: العثور على المستخدمين بأسمائهم

#### 2. إدارة الرسائل
- **إضافة رسالة جديدة**: إضافة رسالة مع تحليل المشاعر
- **إضافة رسالة مثال**: إضافة رسالة تجريبية سريعة
- **البحث عن رسالة**: العثور على رسالة بمعرفها
- **رسائل المستخدم**: عرض رسائل مستخدم معين

#### 3. البحث والإحصائيات
- **البحث في محتوى الرسائل**: البحث بالكلمات المفتاحية
- **الرسائل حسب المشاعر**: تصفية الرسائل حسب نوع المشاعر
- **الإحصائيات**: عرض أعداد المستخدمين والرسائل

#### 4. سجل المشاعر
- **سجل مشاعر المستخدم**: تتبع مشاعر مستخدم عبر الوقت
- **سجل مشاعر الرسالة**: تفاصيل مشاعر رسالة معينة
- **أحدث الرسائل**: عرض آخر الرسائل المضافة

---

## استخدام API.js

### إعداد API.js في مشروعك

```html
<script src="api.js"></script>
<script>
    // تعيين عنوان الخادم
    const API_BASE_URL = 'http://127.0.0.1:5000/api';
</script>
```

### أمثلة عملية

#### إضافة مستخدم جديد
```javascript
const userData = {
    name: "سارة أحمد",
    gender: "أنثى",
    approximate_age: 24
};

try {
    const result = await createUser(userData);
    console.log('تم إنشاء المستخدم:', result);
} catch (error) {
    console.error('خطأ:', error.message);
}
```

#### إضافة رسالة مع تحليل المشاعر
```javascript
const messageData = {
    sender_name: "سارة أحمد",
    gender: "أنثى",
    approximate_age: 24,
    message_content: "أشعر بالسعادة والامتنان اليوم",
    dominant_emotion: "سعيد",
    emotion_history_20s: [
        {
            timestamp: new Date().toISOString(),
            emotion_percentage: {
                "سعيد": 80,
                "ممتن": 15,
                "محايد": 5
            }
        }
    ]
};

try {
    const result = await processFullMessage(messageData);
    console.log('تم إضافة الرسالة:', result);
} catch (error) {
    console.error('خطأ:', error.message);
}
```

#### البحث والاستعلام
```javascript
// البحث عن المستخدمين
const users = await searchUsers("سارة");

// الحصول على رسائل مستخدم
const messages = await getUserMessages("user_123", 10);

// البحث في محتوى الرسائل
const searchResults = await searchMessagesContent("سعادة");

// الحصول على إحصائيات النظام
const stats = await getSystemStats();
```

---

## أنواع المشاعر المدعومة

النظام يدعم الأنواع التالية من المشاعر:
- **سعيد**: مشاعر إيجابية وفرح
- **حزين**: مشاعر سلبية وحزن
- **غاضب**: مشاعر غضب وانزعاج
- **محايد**: مشاعر متوازنة أو غير واضحة
- **متحمس**: مشاعر حماس وطاقة
- **قلق**: مشاعر قلق وتوتر

### إضافة أنواع مشاعر جديدة
يمكنك إضافة أنواع جديدة من المشاعر عبر تعديل:
1. قائمة المشاعر في `test_api.html`
2. منطق التحليل في `app.py`

---

## تحليل البيانات

### فهم سجل المشاعر
كل رسالة تحتوي على:
- **المشاعر السائدة**: النوع الأكثر بروزاً
- **سجل المشاعر**: تفصيل نسب المشاعر المختلفة
- **الطابع الزمني**: وقت تسجيل المشاعر

### مثال على سجل المشاعر
```json
{
    "timestamp": "2025-08-01T15:27:00Z",
    "emotion_percentage": {
        "سعيد": 70,
        "متحمس": 20,
        "محايد": 10
    }
}
```

### تفسير النتائج
- **70% سعيد**: المشاعر الإيجابية هي الغالبة
- **20% متحمس**: مستوى عالي من الطاقة
- **10% محايد**: جزء صغير من المشاعر المتوازنة

---

## أفضل الممارسات

### إدارة المستخدمين
1. **استخدم أسماء واضحة**: تجنب الأسماء المبهمة أو الرموز
2. **حدد العمر بدقة**: يساعد في تحليل أفضل للمشاعر
3. **حافظ على البيانات محدثة**: قم بتحديث المعلومات عند الحاجة

### إدارة الرسائل
1. **اكتب رسائل واضحة**: تجنب النصوص المبهمة
2. **حدد المشاعر بدقة**: اختر النوع الأكثر تمثيلاً
3. **استخدم سجل المشاعر**: أضف تفاصيل دقيقة للنسب

### تحليل البيانات
1. **راجع الإحصائيات بانتظام**: لفهم الاتجاهات
2. **قارن بين الفترات**: لرصد التغييرات
3. **استخدم البحث المتقدم**: للعثور على أنماط محددة

---

## حل المشاكل الشائعة

### مشكلة: لا تظهر النتائج
**الأسباب المحتملة:**
- الخادم غير مُشغل
- خطأ في عنوان API
- مشكلة في الاتصال

**الحلول:**
1. تأكد من تشغيل الخادم: `python app.py`
2. تحقق من عنوان API في المتصفح
3. افحص وحدة التحكم للأخطاء

### مشكلة: خطأ في إضافة البيانات
**الأسباب المحتملة:**
- بيانات ناقصة أو خاطئة
- تجاوز الحدود المسموحة
- مشكلة في قاعدة البيانات

**الحلول:**
1. تحقق من ملء جميع الحقول المطلوبة
2. راجع حدود البيانات (طول النص، العمر، إلخ)
3. أعد تشغيل الخادم

### مشكلة: بطء في الاستجابة
**الأسباب المحتملة:**
- كثرة البيانات في قاعدة البيانات
- استعلامات معقدة
- موارد النظام محدودة

**الحلول:**
1. استخدم حدود للنتائج (limit)
2. قم بتنظيف البيانات القديمة
3. أعد تشغيل النظام

---

## نصائح متقدمة

### استخدام المعالجة المجمعة
```javascript
// معالجة عدة رسائل مرة واحدة
const messages = [message1, message2, message3];
const results = await processBatchMessages(messages);
```

### تحليل المشاعر لفترة زمنية
```javascript
const analysis = await getEmotionAnalysisForPeriod(
    '2025-08-01T00:00:00Z',
    '2025-08-01T23:59:59Z'
);
```

### مراقبة الأداء
```javascript
// قياس وقت الاستجابة
const startTime = Date.now();
const result = await getUserMessages(userId);
const responseTime = Date.now() - startTime;
console.log(`وقت الاستجابة: ${responseTime}ms`);
```

---

## التكامل مع التطبيقات الأخرى

### استخدام API مع React
```jsx
import React, { useState, useEffect } from 'react';

function EmotionDashboard() {
    const [stats, setStats] = useState(null);
    
    useEffect(() => {
        async function loadStats() {
            const systemStats = await getSystemStats();
            setStats(systemStats);
        }
        loadStats();
    }, []);
    
    return (
        <div>
            <h1>لوحة تحكم المشاعر</h1>
            {stats && (
                <div>
                    <p>عدد المستخدمين: {stats.users_count}</p>
                    <p>عدد الرسائل: {stats.messages_count}</p>
                </div>
            )}
        </div>
    );
}
```

### استخدام API مع Node.js
```javascript
const fetch = require('node-fetch');

async function analyzeUserEmotions(userId) {
    const response = await fetch(`http://127.0.0.1:5000/api/history/user/${userId}`);
    const data = await response.json();
    return data;
}
```

---

## الأمان والخصوصية

### حماية البيانات
- لا تشارك معرفات المستخدمين مع أطراف ثالثة
- احم قاعدة البيانات من الوصول غير المصرح
- استخدم HTTPS في بيئة الإنتاج

### إدارة الوصول
- راقب معدل الطلبات لتجنب الإساءة
- سجل العمليات المهمة للمراجعة
- قم بنسخ احتياطية منتظمة

---

## الدعم والمساعدة

### الموارد المتاحة
- **README.md**: معلومات عامة عن المشروع
- **API_DOCUMENTATION.md**: توثيق مفصل لـ API
- **INSTALLATION.md**: دليل التثبيت
- **test_results.md**: نتائج الاختبارات والمشاكل الشائعة

### الحصول على المساعدة
1. راجع ملفات التوثيق أولاً
2. تحقق من وحدة التحكم للأخطاء
3. جرب الأمثلة المتوفرة في `example_usage.js`
4. تأكد من تحديث النظام لآخر إصدار

---

## خاتمة

نظام تحليل المشاعر أداة قوية ومرنة لتحليل النصوص وفهم المشاعر. باتباع هذا الدليل، ستتمكن من الاستفادة الكاملة من جميع ميزات النظام.

نتمنى لك تجربة ممتعة ومفيدة مع النظام!

